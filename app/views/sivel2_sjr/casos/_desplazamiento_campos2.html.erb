<div class="row">
  <div class="col-sm-6">
    <label>Modalidad geográfica:</label>
    <input type="text" name="clasificacion" readonly>
  </div>
  <div class="col-sm-6">
    <label>Sub-modalidad geográfica:</label>
    <input type="text" name="subclasificacion" readonly>
  </div>
</div>

<%= f.association :tipodesp,
  collection: Sivel2Sjr::Tipodesp.where(fechadeshabilitacion: nil),
  include_blank: false,
  label_method: :nombre,
  value_method: :id 
%>
<%= f.association :categoria, 
  collection: Sivel2Gen::Categoria.habilitados.
    where("tipocat <> 'I'"),
  label_method: :nombre, 
  value_method: :id 
%>
<%= f.input :otrosdatos, as: :text %>
<%= f.input :declaro, collection: [["SI", :S], 
  ["NO", :N], ["NO SABE / NO RESPONDE", :R]], 
  include_blank: false,
  input_html: {
    "data-toggle" => 'tooltip',
    "title" => 'Registre si el solicitante ha declarado ante alguna entidad'
  }
%>
<%= f.input :hechosdeclarados, as: :text,
  input_html: {
    "data-toggle" => 'tooltip',
    "title" => 'Descripción de los hechos declarados'
  }
%>
<%= f.input :fechadeclaracion, 
  input_html: { 
    "data-behaviour" => "datepicker",
    value: f.object.fechadeclaracion || '' 
  },
  as: :string
%>
<%= f.association :declaroante,
  collection: Sivel2Sjr::Declaroante.where(fechadeshabilitacion: nil),
  label_method: :nombre,
  value_method: :id,
  input_html: {
    "data-toggle" => 'tooltip',
    "title" => 'Entidad ante la cual rindió su declaración'
  }
%>
<%= f.association :inclusion,
  collection: Sivel2Sjr::Inclusion.where(fechadeshabilitacion: nil),
  label_method: :nombre,
  value_method: :id,
  input_html: {
    "data-toggle" => 'tooltip',
    "title" => 'Inscripción del solicitante en el Registro Único de Víctimas'
  }
%>
<%= f.association :acreditacion,
  collection: Sivel2Sjr::Acreditacion.where(fechadeshabilitacion: nil),
  label_method: :nombre,
  value_method: :id,
  input_html: {
    "data-toggle" => 'tooltip',
    "title" => 'Medio que tiene el solicitante para certificar su situación'
  }
%>
<%= f.input :retornado, 
    boolean_style: :nested,
    inline_label: Sivel2Sjr::Desplazamiento.human_attribute_name(:retornado)
%>
<%= f.input :reubicado, 
    boolean_style: :nested,
    inline_label: Sivel2Sjr::Desplazamiento.human_attribute_name(:reubicado)
%>
<%= f.input :connacionalretorno, 
    boolean_style: :nested,
    inline_label: Sivel2Sjr::Desplazamiento.human_attribute_name(:connacionalretorno)
%>
<%= f.input :acompestado, 
    boolean_style: :nested,
    inline_label: Sivel2Sjr::Desplazamiento.human_attribute_name(:acompestado)
%>
<%= f.input :connacionaldeportado, 
    boolean_style: :nested,
    inline_label: Sivel2Sjr::Desplazamiento.human_attribute_name(:connacionaldeportado)
%>
<%= f.input :oficioantes,
  input_html: { 
    value: f.object.oficioantes || '',
    "data-toggle" => 'tooltip',
    "title" => 'Ocupación antes del desplazamiento'
  }
%>
<%= f.association :modalidadtierra,
  collection: Sivel2Sjr::Modalidadtierra .where(fechadeshabilitacion: nil),
  label_method: :nombre,
  value_method: :id 
%>
<%= f.input :materialesperdidos, as: :text %>
<%= f.input :inmaterialesperdidos, as: :text %>
<%= f.input :protegiorupta, 
    boolean_style: :nested,
    inline_label: Sivel2Sjr::Desplazamiento.human_attribute_name(:protegiorupta)
%>
<%= f.input :documentostierra, as: :text %>
<div class="row">
  <div class="col-md-12">
    <label>¿Piensa establecerse en este lugar?</label></br>
    <%=
      f.collection_radio_buttons(
      :establecerse, [[true, 'Si'] ,[false, 'No'] ,[nil, 'No Responde']], :first, :last  ) do |b|
      b.label(class: "mr-4") { b.radio_button + b.text }
    end
      %>
  </div>
</div>
<% edest = !f.object.establecerse || 
  f.object.establecerse != true ? 
  'display:none' : '' %>
<div class="row">
  <div class="col-md-3">
    Lugar de Destino: 
  </div>
  <div class="col-md-2">
    <%= f.association :destino_pais,
      collection: Sip::Pais.habilitados,
      label_method: :nombre,
      value_method: :id,
      label: false,
      wrapper_html: {
        style: edest
      },
      input_html: {
        "data-toggle" => 'tooltip',
        placeholder: 'País de destino',
        'data-placeholder' => "País de destino...",
        class: 'chosen-select' 
      } %>
  </div>
  <% pa =  f.object.destino_pais_id %>
  <% col = pa ? Sip::Departamento.habilitados.where(id_pais: pa).order(:nombre) : [] %>
  <div class="col-md-2">
    <%= f.association :destino_departamento,
      collection: col,
      label_method: :nombre,
      value_method: :id,
      label: false,
      wrapper_html: {
        style: edest
      },
      input_html: {
        "data-toggle" => 'tooltip',
        placeholder: 'Departamento',
        'data-placeholder' => "Departamento de destino...",
        class: 'chosen-select' 
      } %>
  </div>
  <% dep =  f.object.destino_departamento_id %>
  <% col = dep ? Sip::Municipio.habilitados.where(id_departamento: dep).order(:nombre) : [] %>
  <div class="col-md-2">
    <%= f.association :destino_municipio,
      collection: col,
      label_method: :nombre,
      value_method: :id,
      label: false,
      wrapper_html: {
        style: edest
      },
      input_html: {
        "data-toggle" => 'tooltip',
        placeholder: 'Municipio',
        'data-placeholder' => "Municipio de destino...",
        class: 'chosen-select' 
      } %>
  </div> 
  <% mun =  f.object.destino_municipio_id %>
  <% col = mun ? Sip::Clase.habilitados.where(id_municipio: mun).order(:nombre) : [] %>
  <div class="col-md-2">
    <%= f.association :destino_clase,
      collection: col,
      label_method: :nombre,
      value_method: :id,
      label: false,
      wrapper_html: {
        style: edest
      },
      input_html: {
        "data-toggle" => 'tooltip',
        placeholder: 'Centro poblado',
        'data-placeholder' => "Centro poblado de destino...",
        class: 'chosen-select' 
      } %>
  </div>
  <div style="<%= edest %>" >
    <a data-toggle="collapse" href='#restoubidestino'>
      <h5> + </h5>
    </a>
  </div>
</div>
<div class="collapse div_ubicacionpre" id="restoubidestino">
  <div class="row">
    <% 
      ph = 'Barrio o vereda de Destino'
      ac = {'data-autocompleta' => 'no',
            "data-toggle" => 'tooltip'}
       if (!f.object.destino_lugar || f.object.destino_lugar == '')
         ph = 'Barrio o vereda destino... (Buscar)'
         ac = {"data-toggle" => 'tooltip'}
       end
     %>
    <div class="col-md-3">
        <%= f.input :destino_lugar,
          label: false,
          placeholder: ph,
          input_html: ac
        %>
        <%= f.input :destinoubicacionpre_id, as: :hidden %>
    </div>
    <div class="col-md-3">
      <%= f.input :destino_sitio,
        label: false,
        placeholder: 'Dirección o finca', 
        input_html: {
          "data-toggle" => 'tooltip'
        } %>
    </div>
    <div class="col-md-3">
      <%= f.association :destino_tsitio,
        collection: Sip::Tsitio.where(fechadeshabilitacion: nil).order(:nombre),
       label_method: :nombre,
        value_method: :id,
        label: false,
        include_blank: false,
        selected: f.object.destino_tsitio_id ? f.object.destino_tsitio_id : 1,
        wrapper_html: {
          style: edest
        },
        input_html: {
          "data-toggle" => 'tooltip',
          "title" => 'Seleccione el tipo de sitio'
        } %>
    </div>
  </div>
  <div class="row">
    <div class="col-md-3">
      <%= f.input :destino_latitud,
        label: false,
        as: :float,
        wrapper_html: {
          style: edest
        },
        input_html: {
          "data-toggle" => 'tooltip',
          placeholder: 'Latitud'
        } %>
    </div>
    <div class="col-md-3">
      <%= f.input :destino_longitud,
        label: false,
        as: :float,
        wrapper_html: {
          style: edest
        },
        input_html: {
          "data-toggle" => 'tooltip',
          placeholder: 'Longitud'
        } %>
    </div>
  </div>
</div> 
